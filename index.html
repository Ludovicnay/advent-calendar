<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Notre Calendrier de l'Avent 2024</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Quicksand:wght@400;500;600&display=swap" rel="stylesheet">
</head>
<body class="light-theme">
    <!-- Snowflakes background -->
    <div class="snowflakes" aria-hidden="true">
        <div class="snowflake">â„</div>
        <div class="snowflake">â…</div>
        <div class="snowflake">â†</div>
        <div class="snowflake">â„</div>
        <div class="snowflake">â…</div>
        <div class="snowflake">â†</div>
        <div class="snowflake">â„</div>
        <div class="snowflake">â…</div>
        <div class="snowflake">â†</div>
        <div class="snowflake">â„</div>
    </div>

    <!-- Celebration overlay -->
    <div class="celebration-overlay" id="celebrationOverlay">
        <div class="confetti-container" id="confettiContainer"></div>
    </div>

    <!-- Access Screen (Global Password) -->
    <div class="access-screen" id="accessScreen">
        <div class="access-container">
            <div class="access-header">
                <div class="access-icon">ğŸ”</div>
                <h1>Calendrier de l'Avent</h1>
                <p>Un espace privÃ© rien que pour nous</p>
            </div>
            <div class="access-form">
                <div class="access-field">
                    <label>Mot de passe d'accÃ¨s</label>
                    <input type="password" id="accessPassword" placeholder="Entre le mot de passe..." autocomplete="off">
                </div>
                <button class="btn btn-primary access-btn" id="accessBtn">
                    Entrer ğŸ’•
                </button>
            </div>
            <div class="access-footer">
                <p>ğŸ’ Demande le mot de passe Ã  ton amoureux ğŸ’</p>
            </div>
        </div>
    </div>

    <!-- Login Screen -->
    <div class="login-screen" id="loginScreen">
        <div class="login-container">
            <div class="login-header">
                <h1>ğŸ’ Notre Calendrier de l'Avent ğŸ’</h1>
                <p>25 Jours d'Amour et de Surprises</p>
            </div>
            <div class="login-form">
                <div class="login-tabs">
                    <button class="login-tab active" data-tab="user">Mon Calendrier</button>
                    <button class="login-tab" data-tab="admin">Mode Configuration</button>
                </div>
                <div class="login-content">
                    <div class="login-field">
                        <label>Entre ton prÃ©nom</label>
                        <input type="text" id="loginName" placeholder="Ton prÃ©nom..." autocomplete="off">
                    </div>
                    <div class="login-field admin-only hidden">
                        <label>Mot de passe admin</label>
                        <input type="password" id="adminPassword" placeholder="Mot de passe pour configurer...">
                    </div>
                    <button class="btn btn-primary login-btn" id="loginBtn">
                        <span class="user-login-text">Ouvrir Mon Calendrier ğŸ’•</span>
                        <span class="admin-login-text hidden">Entrer en Mode Configuration ğŸ”§</span>
                    </button>
                </div>
            </div>
            <div class="login-footer">
                <p>PremiÃ¨re visite ? Demande l'accÃ¨s configuration Ã  ton partenaire !</p>
            </div>
        </div>
    </div>

    <!-- Main App -->
    <div class="app-container hidden" id="appContainer">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <h1 class="title">
                    <span class="heart-icon">ğŸ’</span>
                    <span id="welcomeTitle">Notre Calendrier de l'Avent</span>
                    <span class="heart-icon">ğŸ’</span>
                </h1>
                <p class="subtitle" id="welcomeSubtitle">25 Jours d'Amour et de Surprises</p>
            </div>
            <div class="header-controls">
                <button class="icon-btn" id="themeToggle" title="Changer le thÃ¨me">
                    <span class="theme-icon">ğŸŒ™</span>
                </button>
                <button class="icon-btn admin-only-btn hidden" id="manageGiftsBtn" title="GÃ©rer les cadeaux">
                    <span>ğŸ</span>
                </button>
                <button class="icon-btn admin-only-btn hidden" id="exportBtn" title="Exporter le calendrier">
                    <span>ğŸ“¤</span>
                </button>
                <button class="icon-btn admin-only-btn hidden" id="importBtn" title="Importer un calendrier">
                    <span>ğŸ“¥</span>
                </button>
                <button class="icon-btn admin-only-btn hidden danger" id="resetBtn" title="RÃ©initialiser">
                    <span>ğŸ”„</span>
                </button>
                <button class="icon-btn" id="logoutBtn" title="DÃ©connexion">
                    <span>ğŸšª</span>
                </button>
            </div>
        </header>

        <!-- Admin Notice -->
        <div class="admin-notice hidden" id="adminNotice">
            <span>ğŸ”§</span> Mode Configuration - Ta partenaire ne verra pas les changements avant de rafraÃ®chir
        </div>

        <!-- Daily Status -->
        <div class="daily-status available" id="dailyStatus">
            <span class="status-available">âœ¨ Tu peux ouvrir une surprise aujourd'hui !</span>
        </div>

        <!-- Category Selection (Main Action) -->
        <section class="category-selection-section" id="categorySection">
            <h2 class="section-title">âœ¨ Choisis l'Aventure du Jour âœ¨</h2>
            <p class="section-subtitle">SÃ©lectionne une catÃ©gorie pour dÃ©couvrir une surprise alÃ©atoire !</p>
            <div class="category-cards">
                <button class="category-card category-a" data-category="A">
                    <div class="category-card-icon">ğŸ </div>
                    <h3>Ensemble en Personne</h3>
                    <p>ExpÃ©riences partagÃ©es, sorties, activitÃ©s</p>
                    <div class="category-remaining">
                        <span id="remainingA">25</span> surprises restantes
                    </div>
                </button>
                <button class="category-card category-b" data-category="B">
                    <div class="category-card-icon">ğŸ’Œ</div>
                    <h3>Ã€ Distance</h3>
                    <p>Connexion virtuelle, messages, surprises</p>
                    <div class="category-remaining">
                        <span id="remainingB">25</span> surprises restantes
                    </div>
                </button>
                <button class="category-card category-c" data-category="C">
                    <div class="category-card-icon">ğŸŒ™</div>
                    <h3>SoirÃ©e Ensemble</h3>
                    <p>Moments romantiques en soirÃ©e</p>
                    <div class="category-remaining">
                        <span id="remainingC">25</span> surprises restantes
                    </div>
                </button>
            </div>
        </section>

        <!-- Progress Section -->
        <section class="progress-section">
            <h2 class="section-title">ğŸ„ Notre Voyage de DÃ©cembre ğŸ„</h2>
            <div class="progress-overview">
                <div class="progress-stat">
                    <span class="progress-stat-number" id="totalOpened">0</span>
                    <span class="progress-stat-label">Jours Ouverts</span>
                </div>
                <div class="progress-stat">
                    <span class="progress-stat-number" id="totalRemaining">25</span>
                    <span class="progress-stat-label">Jours Restants</span>
                </div>
            </div>
        </section>

        <!-- Calendar Grid (Shows opened days) -->
        <section class="calendar-section">
            <h2 class="section-title">ğŸ“… Surprises DÃ©couvertes ğŸ“…</h2>
            <div class="calendar-grid" id="calendarGrid">
                <!-- Days will be generated by JavaScript -->
            </div>
        </section>

        <!-- Footer -->
        <footer class="footer">
            <p>Fait avec ğŸ’• pour la personne la plus merveilleuse</p>
        </footer>
    </div>

    <!-- Surprise Reveal Modal -->
    <div class="modal-overlay" id="surpriseModal">
        <div class="modal surprise-modal">
            <div class="surprise-header">
                <div class="surprise-day-badge">Jour <span id="surpriseDayNumber">1</span></div>
                <div class="surprise-category-badge" id="surpriseCategoryBadge">Ensemble en Personne</div>
            </div>
            <div class="surprise-content" id="surpriseContent">
                <!-- Surprise content will be injected here -->
            </div>
            <div class="surprise-actions">
                <button class="btn btn-secondary" id="addNoteBtn">ğŸ“ Ajouter une Note</button>
                <button class="btn btn-primary" id="closeSurpriseModal">Fermer avec Amour ğŸ’•</button>
            </div>
            <button class="modal-close" id="closeSurpriseX">Ã—</button>
        </div>
    </div>

    <!-- Note Modal -->
    <div class="modal-overlay" id="noteModal">
        <div class="modal note-modal">
            <div class="modal-header">
                <h2>ğŸ“ Ta Note Personnelle</h2>
                <p>Jour <span id="noteDayNumber">1</span></p>
            </div>
            <div class="modal-body">
                <textarea id="noteTextarea" placeholder="Ã‰cris tes pensÃ©es, souvenirs ou sentiments sur cette journÃ©e..."></textarea>
            </div>
            <div class="modal-actions">
                <button class="btn btn-secondary" id="cancelNote">Annuler</button>
                <button class="btn btn-primary" id="saveNote">Sauvegarder ğŸ’</button>
            </div>
            <button class="modal-close" id="closeNoteModal">Ã—</button>
        </div>
    </div>

    <!-- Gift Pool Management Modal (Admin) -->
    <div class="modal-overlay" id="giftPoolModal">
        <div class="modal gift-pool-modal">
            <div class="modal-header">
                <h2>ğŸ GÃ©rer les Cadeaux</h2>
                <p>Ajoute des surprises pour chaque catÃ©gorie</p>
            </div>
            <div class="gift-pool-tabs">
                <button class="gift-tab active" data-category="A">ğŸ  Ensemble</button>
                <button class="gift-tab" data-category="B">ğŸ’Œ Ã€ Distance</button>
                <button class="gift-tab" data-category="C">ğŸŒ™ SoirÃ©e</button>
            </div>
            <div class="gift-pool-content">
                <div class="gift-pool-list" id="giftPoolList">
                    <!-- Gifts will be listed here -->
                </div>
                <button class="btn btn-secondary add-gift-btn" id="addGiftBtn">+ Ajouter un Cadeau</button>
            </div>
            <div class="modal-actions">
                <button class="btn btn-primary" id="closeGiftPoolModal">TerminÃ©</button>
            </div>
            <button class="modal-close" id="closeGiftPoolX">Ã—</button>
        </div>
    </div>

    <!-- Edit Gift Modal -->
    <div class="modal-overlay" id="editGiftModal">
        <div class="modal edit-modal">
            <div class="modal-header">
                <h2>âœï¸ <span id="editGiftTitle">Ajouter un Cadeau</span></h2>
                <p id="editGiftCategory">CatÃ©gorie A</p>
            </div>
            <div class="modal-body edit-body">
                <div class="edit-field">
                    <label>Titre *</label>
                    <input type="text" id="editTitle" placeholder="Titre de la surprise...">
                </div>
                <div class="edit-field">
                    <label>Emoji</label>
                    <input type="text" id="editEmoji" placeholder="ğŸ">
                </div>
                <div class="edit-field">
                    <label>Description / Message d'amour *</label>
                    <textarea id="editDescription" placeholder="Ã‰cris ton message..."></textarea>
                </div>
                <div class="edit-field">
                    <label>Lien (optionnel)</label>
                    <input type="url" id="editLink" placeholder="https://...">
                    <input type="text" id="editLinkText" placeholder="Texte du lien...">
                </div>
                <div class="edit-field">
                    <label>DÃ©fi / Challenge (optionnel)</label>
                    <textarea id="editTask" placeholder="Un dÃ©fi amusant..."></textarea>
                </div>
                <div class="edit-field">
                    <label>Indice Cadeau (optionnel)</label>
                    <input type="text" id="editGift" placeholder="Description ou indice du cadeau...">
                </div>
                <div class="edit-field">
                    <label>Image (optionnel) - Photo de lettre, etc.</label>
                    <div class="image-upload-area" id="imageUploadArea">
                        <input type="file" id="editImage" accept="image/*" style="display: none;">
                        <div class="image-preview" id="imagePreview">
                            <span class="upload-placeholder">ğŸ“· Cliquez pour ajouter une image</span>
                        </div>
                        <button type="button" class="btn btn-secondary btn-small" id="removeImageBtn" style="display: none;">ğŸ—‘ï¸ Supprimer l'image</button>
                    </div>
                </div>
            </div>
            <div class="modal-actions">
                <button class="btn btn-danger" id="deleteGift">ğŸ—‘ï¸ Supprimer</button>
                <button class="btn btn-secondary" id="cancelEditGift">Annuler</button>
                <button class="btn btn-primary" id="saveEditGift">Sauvegarder ğŸ’</button>
            </div>
            <button class="modal-close" id="closeEditGiftModal">Ã—</button>
        </div>
    </div>

    <!-- Import Modal -->
    <div class="modal-overlay" id="importModal">
        <div class="modal import-modal">
            <div class="modal-header">
                <h2>ğŸ“¥ Importer un Calendrier</h2>
                <p>Colle les donnÃ©es exportÃ©es ci-dessous</p>
            </div>
            <div class="modal-body">
                <textarea id="importTextarea" placeholder="Colle ton JSON ici..."></textarea>
            </div>
            <div class="modal-actions">
                <button class="btn btn-secondary" id="cancelImport">Annuler</button>
                <button class="btn btn-primary" id="confirmImport">Importer ğŸ“¥</button>
            </div>
            <button class="modal-close" id="closeImportModal">Ã—</button>
        </div>
    </div>

    <!-- Password Setup Modal -->
    <div class="modal-overlay" id="passwordModal">
        <div class="modal">
            <div class="modal-header">
                <h2>ğŸ” CrÃ©er un Mot de Passe</h2>
                <p>Ce mot de passe protÃ¨ge la configuration des cadeaux</p>
            </div>
            <div class="modal-body">
                <div class="edit-field">
                    <label>Nouveau mot de passe</label>
                    <input type="password" id="newPassword" placeholder="Entre ton mot de passe...">
                </div>
                <div class="edit-field">
                    <label>Confirmer le mot de passe</label>
                    <input type="password" id="confirmPassword" placeholder="Confirme le mot de passe...">
                </div>
            </div>
            <div class="modal-actions">
                <button class="btn btn-primary" id="savePassword">Sauvegarder ğŸ”’</button>
            </div>
        </div>
    </div>

    <script src="data.js"></script>
    <script src="app.js"></script>
</body>
</html>
